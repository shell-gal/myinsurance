<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cq.myinsurance.dao.AuthorizationMapper">

    <!--<resultMap id="rolemap" type="com.cq.myinsurance.pojo.vo.Authorization">-->
        <!--<collection property="roles" ofType="com.cq.myinsurance.pojo.Role">-->
            <!--<result column="role_name" jdbcType="VARCHAR" property="roleName"/>-->
        <!--</collection>-->
    <!--</resultMap>-->

    <!--<resultMap id="rightmap" type="com.cq.myinsurance.pojo.vo.Authorization">-->
        <!--<collection property="rights" ofType="com.cq.myinsurance.pojo.Right">-->
            <!--<result column="right_name" jdbcType="VARCHAR" property="rightName"/>-->
        <!--</collection>-->
    <!--</resultMap>-->

    <!--查询用户所拥有的角色-->
    <select id="selectRolesByuserid" parameterType="java.lang.Integer" resultType="java.lang.String">
     select role_name roleName from role_info
    where role_id in
    (SELECT role_id from user_role_info where
     user_id= #{userId,jdbcType=INTEGER})
  </select>

    <!--查询用户所拥有的权限-->
    <select id="selectRightByuserid" parameterType="java.lang.Integer" resultType="java.lang.String">
    select right_name from right_info where right_id in
   (
  select right_id from  role_right_info where role_id in
	(
	 select role_id from user_role_info where user_id=#{userId,jdbcType=INTEGER}
	)
)
  </select>
</mapper>